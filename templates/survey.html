<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mind Genomic Survey</title>
    
    {% include 'bootstrap.html' %}
    
  </head>
  <body>

    {% include 'nav.html' %}

    {% include 'banner.html' %}
    
    <div class="container-fuild text-center mt-2 mb-4">
        <h1>Please answer the questions</h1>
    </div>

    <form id="survey-form" action="/survey/submit" method="post">
    
      {% include 'profile.html' %}

      {% include 'survey_questions.html' %}

      <div class="d-grid gap-2 col-1 mx-auto" style="font-size:160%;">
        <input type="submit" value="submit" style="background-color:rgb(113, 35, 173);color:rgb(255, 255, 255);">
      </div>
    </form>

    {% include 'footer.html' %}


    <script>
      // creates a Date object representing the current time and assigns it to the variable startTime
      const startTime = new Date();
  
      // adds an event listener to the form with the id survey-form
      // when the form is submitted, the function specified inside the listener is executed
        
      document.getElementById('survey-form').addEventListener('submit', function(event) {
        const endTime = new Date();
        const elapsedTime = parseFloat((endTime - startTime) / 1000/60).toFixed(2); // Convert to minute
        
        // Add a hidden input field to store the elapsed time
        const elapsedTimeInput = document.createElement('input');
         // create a new <input> HTML element
        elapsedTimeInput.type = 'hidden';
        // set the type attribute of the input element to 'hidden'
        elapsedTimeInput.name = 'elapsed_time';
        // set the name attribute of the input element to 'elapsed_time'
        // identify input field when the form is submitted
        elapsedTimeInput.value = elapsedTime;
        // set the value attribute of the input element 
        this.appendChild(elapsedTimeInput);
        // append the hidden input field to the form element 
        // this refers to the 'survey-form' element within the context of the event listener function 
        // when the form is submitted, the hidden input field containing the elapsed time will be included in the form data
      });
      
    </script>
    
  </body>
  
</html>
